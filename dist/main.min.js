function initializeSidebar(){const e=document.getElementById("sidebar"),t=document.getElementById("contentArea"),n=document.getElementById("collapseBtn"),i=document.getElementById("mobileMenuBtn");let o=!1;n&&n.addEventListener("click",()=>{o=!o,e.classList.toggle("collapsed"),t.classList.toggle("expanded"),n.innerHTML=o?'<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-chevron-right" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>':'<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-chevron-left" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>'}),i&&i.addEventListener("click",()=>{e.classList.toggle("open")}),document.addEventListener("click",t=>{e&&!e.contains(t.target)&&t.target!==i&&e.classList.remove("open")})}function initializeThemeToggle(){const e=document.getElementById("themeToggle");let t=!1;e&&e.addEventListener("click",()=>{t=!t,t?(document.body.classList.add("bg-gray-900"),document.body.classList.remove("bg-gray-50"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-sun" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>'):(document.body.classList.remove("bg-gray-900"),document.body.classList.add("bg-gray-50"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-moon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"/></svg>')})}function initializeCharts(){const e=e=>{const t=[],n=new Date;for(let i=e-1;i>=0;i--){const o=new Date(n);o.setDate(o.getDate()-i),e<=7?t.push(o.toLocaleDateString("en-US",{weekday:"short"})):t.push(o.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}return t},t={7:{labels:e(7),instagram:[120,150,180,170,200,220,210],facebook:[80,100,120,110,140,160,150]},14:{labels:e(14),instagram:[110,130,140,160,170,180,175,160,150,170,190,210,220,210],facebook:[70,90,100,120,130,140,135,120,110,130,150,170,180,170]},30:{labels:e(30),instagram:[100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,230,220,210,200,190,180,170,160,150,140,130,120,110,120,130],facebook:[60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,190,180,170,160,150,140,130,120,110,100,90,80,70,80,90]}};let n=null;if("undefined"!=typeof Chart)try{const e=document.getElementById("engagementChart");if(e){const i=e.getContext("2d");n=new Chart(i,{type:"line",data:{labels:t[7].labels,datasets:[{label:"Instagram",data:t[7].instagram,borderColor:"#CC0033",backgroundColor:"rgba(204,0,51,0.1)",tension:.4,pointBackgroundColor:"#CC0033",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,fill:!0,borderWidth:3},{label:"Facebook",data:t[7].facebook,borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.1)",tension:.4,pointBackgroundColor:"#2563eb",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,fill:!0,borderWidth:3}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#CC0033",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(e){return e.dataset.label+": "+e.parsed.y+" engagements"}}}},scales:{x:{grid:{display:!0,color:"rgba(0,0,0,0.05)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12},maxTicksLimit:7,callback:function(e,t,n){return this.getLabelForValue(e)}},border:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0,0,0,0.05)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:12}}}}}})}}catch(e){console.error("Failed to initialize chart:",e);const t=document.getElementById("engagementChart");t&&(t.innerHTML='<div class="flex items-center justify-center h-full text-gray-500">Chart initialization failed</div>')}const i=document.getElementById("engagementRange");i&&n&&i.addEventListener("change",function(){if(n){const e=this.value;n.data.labels=t[e].labels,n.data.datasets[0].data=t[e].instagram,n.data.datasets[1].data=t[e].facebook,n.update("active")}}),window.exportChart=function(){if(n){const e=document.createElement("a");e.download="engagement-chart.png",e.href=n.toBase64Image(),e.click()}}}function initializeRecommendations(){document.querySelectorAll(".recommendation-card").forEach(e=>{e.addEventListener("click",function(){this.style.transform="scale(0.98)",setTimeout(()=>{this.style.transform=""},150);const e=this.querySelector("h4").textContent;e.includes("Content Idea")?console.log("Opening post composer with content idea"):e.includes("Best Posting Time")?console.log("Showing posting time analysis"):e.includes("Trending Hashtags")&&console.log("Showing hashtag analytics")})})}function initializeStatCards(){const e=document.querySelectorAll(".stat-card"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});e.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",t.observe(e)})}function initializeDropdowns(){const e=document.querySelectorAll(".more-btn"),t=document.querySelectorAll(".dropdown-menu");let n=null;e.forEach((e,i)=>{e.addEventListener("click",e=>{e.stopPropagation(),n&&n!==t[i]&&n.classList.add("hidden"),t[i].classList.toggle("hidden"),n=t[i].classList.contains("hidden")?null:t[i]})}),document.addEventListener("click",()=>{t.forEach(e=>e.classList.add("hidden")),n=null}),t.forEach((e,t)=>{const n=e.querySelector(".view-btn"),i=e.querySelector(".edit-btn"),o=e.querySelector(".delete-btn");n&&n.addEventListener("click",n=>{n.stopPropagation(),showModal(t),e.classList.add("hidden")}),i&&i.addEventListener("click",t=>{t.stopPropagation(),alert("Edit post coming soon!"),e.classList.add("hidden")}),o&&o.addEventListener("click",t=>{t.stopPropagation(),confirm("Are you sure you want to delete this post?")&&alert("Delete post coming soon!"),e.classList.add("hidden")})})}function initializeModals(){const e=document.getElementById("postModal"),t=document.getElementById("closeModal"),n=document.getElementById("modalContent");t&&t.addEventListener("click",()=>{e.classList.add("hidden")}),e&&e.addEventListener("click",t=>{t.target===e&&e.classList.add("hidden")}),window.showModal=function(t){const i=[{title:"Spring Tournament Highlights",platform:"Instagram",content:"Amazing shots from our spring tournament! The course was in perfect condition and the competition was fierce. Congratulations to all participants!",image:"tournament-highlights.jpg",engagement:{likes:248,comments:42,shares:15}},{title:"Weekend Golf Special",platform:"Facebook",content:"Don't miss our weekend special! 20% off green fees for groups of 4 or more. Perfect weather for golf this weekend!",image:"weekend-special.jpg",engagement:{likes:187,comments:23,shares:23}},{title:"Golf Tip: Perfect Your Putt",platform:"Instagram",content:"Master the art of putting with these pro tips! Remember: keep your head still and follow through smoothly.",image:"putting-tips.jpg",engagement:{likes:312,comments:28,shares:8}}][t];i&&n&&(n.innerHTML=`\n                <div class="space-y-4">\n                    <div class="flex items-center justify-between">\n                        <h3 class="text-xl font-bold">${i.title}</h3>\n                        <span class="badge badge-primary">${i.platform}</span>\n                    </div>\n                    <p class="text-gray-600">${i.content}</p>\n                    <div class="flex space-x-4 text-sm">\n                        <span class="flex items-center gap-1">\n                            <svg xmlns="http://www.w3.org/2000/svg" class="lucide-icon w-4 h-4 text-red-500" fill="none" stroke="currentColor" stroke-width="2">\n                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>\n                            </svg>\n                            ${i.engagement.likes}\n                        </span>\n                        <span class="flex items-center gap-1">\n                            <svg xmlns="http://www.w3.org/2000/svg" class="lucide-icon w-4 h-4 text-blue-500" fill="none" stroke="currentColor" stroke-width="2">\n                                <path d="M21 11.5a8.38 8.38 0 0 1-1.9 5.4A8.5 8.5 0 0 1 3.6 17L2 21l4-1.6A8.38 8.38 0 0 0 12 19.5a8.5 8.5 0 1 0-8.5-8.5"/>\n                            </svg>\n                            ${i.engagement.comments}\n                        </span>\n                        <span class="flex items-center gap-1">\n                            <svg xmlns="http://www.w3.org/2000/svg" class="lucide-icon w-4 h-4 text-green-500" fill="none" stroke="currentColor" stroke-width="2">\n                                <circle cx="18" cy="5" r="3"/>\n                                <circle cx="6" cy="12" r="3"/>\n                                <circle cx="18" cy="19" r="3"/>\n                                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>\n                                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>\n                            </svg>\n                            ${i.engagement.shares}\n                        </span>\n                    </div>\n                </div>\n            `,e.classList.remove("hidden"))}}function initializeResponsiveHandling(){function e(){const e=document.getElementById("sidebar"),t=document.getElementById("contentArea");window.innerWidth<768?(e.classList.add("collapsed"),t.classList.add("expanded")):(e.classList.remove("collapsed"),t.classList.remove("expanded"))}window.addEventListener("resize",e),e()}function safeGetElement(e){try{return document.getElementById(e)}catch(t){return console.error(`Error getting element with id: ${e}`,t),null}}function handleError(e,t){console.error(`Error in ${t}:`,e)}function initializeGitHubIntegration(){const e=document.getElementById("toggleToken"),t=document.getElementById("githubToken");e&&t&&e.addEventListener("click",function(){const e="password"===t.type?"text":"password";t.type=e,this.innerHTML="password"===e?'<i class="fas fa-eye"></i>':'<i class="fas fa-eye-slash"></i>'});const n=document.getElementById("manualConnectBtn");n&&n.addEventListener("click",handleManualGitHubConnection);const i=document.getElementById("githubConnectBtn");i&&i.addEventListener("click",handleGitHubOAuth)}function handleManualGitHubConnection(){const e=document.getElementById("githubUsername")?.value,t=document.getElementById("githubRepo")?.value,n=document.getElementById("githubToken")?.value;if(!e||!t||!n)return void showNotification("Please fill in all fields","error");const i=document.getElementById("manualConnectBtn"),o=i.innerHTML;i.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Connecting...',i.disabled=!0,setTimeout(()=>{testGitHubCredentials(e,t,n).then(e=>{e?(showNotification("GitHub connected successfully!","success"),updateGitHubStatus("connected")):showNotification("Invalid credentials. Please check your token and repository.","error")}).catch(e=>{showNotification("Connection failed. Please try again.","error"),console.error("GitHub connection error:",e)}).finally(()=>{i.innerHTML=o,i.disabled=!1})},1e3)}function handleGitHubOAuth(){showNotification("Redirecting to GitHub...","info"),setTimeout(()=>{showNotification("GitHub OAuth is currently experiencing issues. Please use manual connection.","warning")},1500)}async function testGitHubCredentials(e,t,n){try{return(await fetch(`https://api.github.com/repos/${e}/${t}`,{headers:{Authorization:`token ${n}`,Accept:"application/vnd.github.v3+json"}})).ok}catch(e){return console.error("GitHub API error:",e),!1}}function updateGitHubStatus(e){const t=document.querySelector("#githubConnectBtn").parentElement.querySelector("span"),n=document.getElementById("githubConnectBtn");"connected"===e?(t.className="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs",t.textContent="Connected",n.innerHTML='<i class="fas fa-unlink"></i>',n.onclick=()=>disconnectGitHub()):(t.className="bg-red-100 text-red-700 px-2 py-1 rounded-full text-xs",t.textContent="Disconnected",n.innerHTML='<i class="fas fa-link"></i>',n.onclick=()=>handleGitHubOAuth())}function disconnectGitHub(){confirm("Are you sure you want to disconnect GitHub?")&&(updateGitHubStatus("disconnected"),showNotification("GitHub disconnected successfully","success"),document.getElementById("githubUsername").value="",document.getElementById("githubRepo").value="",document.getElementById("githubToken").value="")}function testGitHubConnection(){const e=document.getElementById("githubUsername")?.value,t=document.getElementById("githubRepo")?.value,n=document.getElementById("githubToken")?.value;e&&t&&n?(showNotification("Testing connection...","info"),testGitHubCredentials(e,t,n).then(e=>{e?showNotification("Connection test successful!","success"):showNotification("Connection test failed. Check your credentials.","error")}).catch(e=>{showNotification("Connection test failed. Please try again.","error")})):showNotification("Please fill in all GitHub credentials first","warning")}function clearGitHubCache(){localStorage.removeItem("github_connection"),localStorage.removeItem("github_token"),document.getElementById("githubUsername").value="",document.getElementById("githubRepo").value="",document.getElementById("githubToken").value="",showNotification("GitHub cache cleared successfully","success")}function showGitHubHelp(){showModal('\n        <div class="space-y-4">\n            <h3 class="text-lg font-semibold">GitHub Integration Help</h3>\n            \n            <div>\n                <h4 class="font-medium mb-2">Creating a Personal Access Token:</h4>\n                <ol class="list-decimal list-inside space-y-1 text-sm">\n                    <li>Go to GitHub Settings > Developer settings > Personal access tokens</li>\n                    <li>Click "Generate new token"</li>\n                    <li>Select the following scopes: repo, workflow</li>\n                    <li>Copy the generated token</li>\n                </ol>\n            </div>\n            \n            <div>\n                <h4 class="font-medium mb-2">Common Issues:</h4>\n                <ul class="list-disc list-inside space-y-1 text-sm">\n                    <li>Make sure your repository exists and is accessible</li>\n                    <li>Check that your token has the correct permissions</li>\n                    <li>Ensure your GitHub username is correct</li>\n                    <li>Try refreshing the page if connection fails</li>\n                </ul>\n            </div>\n            \n            <div>\n                <h4 class="font-medium mb-2">Need More Help?</h4>\n                <p class="text-sm">Contact our support team at support@rutgers.edu</p>\n            </div>\n        </div>\n    ')}function showNotification(e,t="info"){const n=document.createElement("div");n.className="fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 max-w-sm "+("success"===t?"bg-green-500 text-white":"error"===t?"bg-red-500 text-white":"warning"===t?"bg-yellow-500 text-white":"bg-blue-500 text-white"),n.innerHTML=`\n        <div class="flex items-center">\n            <i class="fas fa-${"success"===t?"check-circle":"error"===t?"exclamation-circle":"warning"===t?"exclamation-triangle":"info-circle"} mr-2"></i>\n            <span>${e}</span>\n        </div>\n    `,document.body.appendChild(n),setTimeout(()=>{n.remove()},5e3)}document.addEventListener("DOMContentLoaded",function(){if("undefined"==typeof Chart){console.warn("Chart.js failed to load. Chart functionality will be disabled.");const e=document.getElementById("engagementChart");e&&(e.innerHTML='<div class="flex items-center justify-center h-full text-gray-500">Chart loading failed</div>')}initializeSidebar(),initializeThemeToggle(),initializeCharts(),initializeDropdowns(),initializeModals(),initializeResponsiveHandling(),initializeRecommendations(),initializeStatCards(),initializeGitHubIntegration()}),window.testGitHubConnection=testGitHubConnection,window.clearGitHubCache=clearGitHubCache,window.showGitHubHelp=showGitHubHelp;